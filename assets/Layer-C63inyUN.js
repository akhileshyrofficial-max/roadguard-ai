const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/portalLayers-Dr8oeeF7.js","assets/Identifiable-B58w9FD1.js","assets/index-VFfT8Aji.js","assets/associatedFeatureServiceUtils-BN0GHEhP.js","assets/PortalItem-DLsR4Y2a.js","assets/fetchService-CoDeYCDA.js","assets/layerUtils-CAMu1s-2.js","assets/loadUtils-Bp82eUcj.js","assets/lazyLayerLoader-e06VUeuf.js","assets/portalItemUtils-LGbTNR1x.js","assets/projectionUtils-DsK_8mH5.js","assets/arcgisLayers-9IRai4hR.js"])))=>i.map(i=>d[i]);
import{_ as $}from"./index-VFfT8Aji.js";import{ao as j,i as L,aW as f,aO as x,ef as _,b8 as O,T as P,c as i,m as l,ac as T,ab as E,d as N,bJ as J,dv as M,k as B,a3 as U,al as b,b as k,I as q,s as D,H as z}from"./Identifiable-B58w9FD1.js";async function R(t){var s;const e="portalItem"in t?t:{portalItem:t},{fromItem:r}=await $(async()=>{const{fromItem:n}=await import("./portalLayers-Dr8oeeF7.js");return{fromItem:n}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]));try{return await r(e)}catch(n){const a=e==null?void 0:e.portalItem,u=(a==null?void 0:a.id)||"unset",d=((s=a==null?void 0:a.portal)==null?void 0:s.url)||j.portalUrl;throw L.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+d+"', id: '"+u+"')",n),n}}const A={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function w(t,e,r,s=f){const n=new x(_(s)),a=O.fromJSDate(t,{zone:n}),u=r==="decades"||r==="centuries"?"year":V(r);return r==="decades"&&(e*=10),r==="centuries"&&(e*=100),a.plus({[u]:e}).toJSDate()}function C(t,e,r="milliseconds"){const s=t.getTime(),n=G(e,r,"milliseconds");return new Date(s+n)}function S(t,e,r=f){const s=new x(_(r)),n=O.fromJSDate(t,{zone:s});if(e==="decades"||e==="centuries"){const u=n.startOf("year"),{year:d}=u,y=d-d%(e==="decades"?10:100);return u.set({year:y}).toJSDate()}const a=V(e);return n.startOf(a).toJSDate()}function G(t,e,r){return t===0?0:t*A[e]/A[r]}function K(t,e){return t&&e?t.intersection(e):t||e}function V(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var c,m;let p=(m=class extends P{static get allTime(){return I}static get empty(){return W}static fromArray(e){return new c({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,r){return r.end!=null?new Date(r.end):null}writeEnd(e,r){r.end=(e==null?void 0:e.getTime())??null}get isAllTime(){return this.equals(c.allTime)}get isEmpty(){return this.equals(c.empty)}readStart(e,r){return r.start!=null?new Date(r.start):null}writeStart(e,r){r.start=(e==null?void 0:e.getTime())??null}clone(){return new c({end:this.end,start:this.start})}equals(e){var u,d,y,h;if(!e)return!1;const r=((u=this.start)==null?void 0:u.getTime())??this.start,s=((d=this.end)==null?void 0:d.getTime())??this.end,n=((y=e.start)==null?void 0:y.getTime())??e.start,a=((h=e.end)==null?void 0:h.getTime())??e.end;return r===n&&s===a}expandTo(e,r=f){if(this.isEmpty||this.isAllTime)return this.clone();let s=this.start;s&&(s=S(s,e,r));let n=this.end;if(n){const a=S(n,e,r);n=n.getTime()===a.getTime()?a:w(a,1,e,r)}return new c({start:s,end:n})}intersection(e){var y,h,v,g;if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return c.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const r=((y=this.start)==null?void 0:y.getTime())??-1/0,s=((h=this.end)==null?void 0:h.getTime())??1/0,n=((v=e.start)==null?void 0:v.getTime())??-1/0,a=((g=e.end)==null?void 0:g.getTime())??1/0;let u,d;return n>=r&&n<=s?u=n:r>=n&&r<=a&&(u=r),s>=n&&s<=a?d=s:a>=r&&a<=s&&(d=a),u==null||d==null||isNaN(u)||isNaN(d)?c.empty:new c({start:u===-1/0?null:new Date(u),end:d===1/0?null:new Date(d)})}offset(e,r,s=f){if(this.isEmpty||this.isAllTime)return this.clone();const n=new c,{start:a,end:u}=this;return a!=null&&(n.start=w(a,e,r,s)),u!=null&&(n.end=w(u,e,r,s)),n}toArray(){var e,r;return this.isEmpty?[void 0,void 0]:[((e=this.start)==null?void 0:e.getTime())??null,((r=this.end)==null?void 0:r.getTime())??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return I.clone();const r=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,s=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new c({start:r,end:s})}},c=m,m);i([l({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),i([T("end")],p.prototype,"readEnd",null),i([E("end")],p.prototype,"writeEnd",null),i([l({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),i([l({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),i([l({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),i([T("start")],p.prototype,"readStart",null),i([E("start")],p.prototype,"writeStart",null),p=c=i([N("esri.time.TimeExtent")],p);const I=new p,W=new p({start:void 0,end:void 0});let F=0,o=class extends J.EventedMixin(M.IdentifiableMixin(B)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new U(-180,-90,180,90,b.WGS84),this.id=Date.now().toString(16)+"-layer-"+F++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=b.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const e=typeof t=="string"?{url:t}:t;return(await $(async()=>{const{fromUrl:r}=await import("./arcgisLayers-9IRai4hR.js");return{fromUrl:r}},__vite__mapDeps([11,2,1,3,4,5,6,8]))).fromUrl(e)}static fromPortalItem(t){return R(t)}initialize(){this.when().catch(t=>{k(t)||L.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const e=this;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"referenceLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e),this._set("parent",null)}}get effectiveVisible(){let t=this.visible;const e=this.parent;return t&&e&&"effectiveVisible"in e&&t&&(t=e.effectiveVisible),t}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return q(this.url)}createLayerView(t,e){return Promise.reject(new D("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await z(t,{query:{f:"json"},responseType:"json"})).data;throw new D("layer:no-attribution-data","Layer does not have attribution data")}};i([l({type:String})],o.prototype,"attributionDataUrl",void 0),i([l({readOnly:!0})],o.prototype,"effectiveVisible",null),i([l({type:U})],o.prototype,"fullExtent",void 0),i([l({readOnly:!0})],o.prototype,"hasAttributionData",null),i([l({type:String,clonable:!1})],o.prototype,"id",void 0),i([l({type:Boolean,nonNullable:!0})],o.prototype,"legendEnabled",void 0),i([l({type:["show","hide","hide-children"]})],o.prototype,"listMode",void 0),i([l({type:Number,range:{min:0,max:1},nonNullable:!0})],o.prototype,"opacity",void 0),i([l({clonable:!1})],o.prototype,"parent",void 0),i([l({readOnly:!0})],o.prototype,"parsedUrl",null),i([l({type:Boolean,readOnly:!0})],o.prototype,"persistenceEnabled",void 0),i([l({type:Boolean})],o.prototype,"popupEnabled",void 0),i([l({type:Boolean})],o.prototype,"attributionVisible",void 0),i([l({type:b})],o.prototype,"spatialReference",void 0),i([l({type:String})],o.prototype,"title",void 0),i([l({readOnly:!0,json:{read:!1}})],o.prototype,"type",void 0),i([l()],o.prototype,"url",void 0),i([l({type:p})],o.prototype,"visibilityTimeExtent",void 0),i([l({type:Boolean,nonNullable:!0})],o.prototype,"visible",void 0),o=i([N("esri.layers.Layer")],o);export{K as g,o as h,C as i,G as m,w as o,A as r,p as u};
