const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WhereClauseCache-bgzfZccG.js","assets/LRUCache-eBEVKbNU.js","assets/MemCache-CUhFgUMJ.js","assets/WhereClause-GH2HPADl.js","assets/Identifiable-_3rFZ1o6.js","assets/index-BEHHhRxI.js","assets/TimeOnly-YXxQ25V6.js","assets/enum-DaKdEk_o.js","assets/UnknownTimeZone-CpPKXuRf.js","assets/arcadeUtils-0u35Qy5N.js","assets/arcade-B0yac0nY.js","assets/aiServices-C9Z_66ql.js","assets/ImmutableArray-BPVd6ESQ.js","assets/shared-CaVpMDBF.js","assets/Field-Bopg3Spw.js","assets/fieldType-Pks4G8In.js","assets/number-CofdhOJW.js","assets/jsonUtils-Cc67rW5Z.js","assets/commonProperties-DHiB1uzW.js","assets/utils-C73sopP7.js","assets/featureConversionUtils-scwmf_ir.js","assets/aaBoundingBox-DNlIzH5i.js","assets/OptimizedFeature-C57xHwXW.js","assets/memoryEstimations-BG_NSMOj.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/createFeatureId-BiB9j2WD.js","assets/FieldsIndex-BTwzr3dJ.js","assets/timeZoneUtils-Cef7SfoB.js","assets/unitConversion-C3XOdf9F.js","assets/uuid-Cl5lrJ4c.js","assets/batchExec-Cjw9LNGD.js","assets/QueueProcessor-BZCvf8_s.js","assets/Queue-CJjQn74K.js","assets/ReactiveMap-DptZZMoQ.js","assets/signal-R7pX2aet.js"])))=>i.map(i=>d[i]);
import{b8 as _,f0 as z,eL as v,t as X,as as j,s as H}from"./Identifiable-_3rFZ1o6.js";import{_ as c}from"./index-BEHHhRxI.js";let F;async function q(){return F==null&&(F=c(()=>import("./WhereClauseCache-bgzfZccG.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(e=>new e.WhereClauseCache(500,500))),F}async function B(e,n){const t=await q(),i=t.get(e,n);if(i==null)throw t.getError(e,n);return i}function ze(e,n){return e||(e=null),n||(n=null),e==="1=1"?n??e:n==="1=1"?e??n:e&&n?`(${e}) AND (${n})`:e??n}function Xe(e,n){return e||(e=null),n||(n=null),e==="1=1"||n==="1=1"||e===n?e==="1=1"?e:n:e&&n?`(${e}) OR (${n})`:e??n}function je(e,n){return n.length===0?null:`${e} IN (${Q(n)})`}function Q(e){return e.map(n=>typeof n=="string"?Y(n):n).join(",")}function Y(e){return`'${e.replaceAll("'","''")}'`}function He(e){return typeof e=="number"}function qe(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Be(e){return typeof e=="boolean"}function f(e){return typeof e=="string"||e instanceof String}function J(e){return e==null||f(e)}function Qe(e){return Array.isArray(e)}function Ye(e){return(e==null?void 0:e.declaredClass)==="esri.Graphic"}function Je(e){return e instanceof Date}const W="HH:mm",Z="HH:mm:ss",K="HH:mm:ss.SSS",ee=[K,Z,W,"TT"],ne="yyyy-MM-dd";function x(e){if(!e||!f(e))return null;const n=_.fromFormat(e,ne);return n.isValid?n:null}function h(e){return e&&f(e)?z(ee,n=>{const t=_.fromFormat(e,n);return t.isValid?t:null})??null:null}function E(e){if(!e||!f(e))return null;const n=_.fromISO(e);return n.isValid?n:null}var d;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(d||(d={}));const N=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function te(e){return e!=null&&N.has(e.type)}function S(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function M(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function L(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}const ie=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);v(N,ie);function We(e,n){const t=e==null?void 0:e.domain;if(!t||t.type!=="range")return;const i="range"in t?t.range[0]:t.minValue,r="range"in t?t.range[1]:t.maxValue,l=te(e);return S(e)||L(e)||M(e)?{...re(e,r,i),isInteger:l}:{min:i!=null&&typeof i=="number"?i:null,max:r!=null&&typeof r=="number"?r:null,rawMin:i,rawMax:r,isInteger:l}}function re(e,n,t){var i,r,l,a,o,s;return S(e)?{min:(i=x(t))==null?void 0:i.toMillis(),max:(r=x(n))==null?void 0:r.toMillis(),rawMin:t,rawMax:n}:L(e)?{min:(l=h(t))==null?void 0:l.toMillis(),max:(a=h(n))==null?void 0:a.toMillis(),rawMin:t,rawMax:n}:M(e)?{min:(o=E(t))==null?void 0:o.toMillis(),max:(s=E(n))==null?void 0:s.toMillis(),rawMin:t,rawMax:n}:{max:null,min:null}}function le(e){if(!e)return;const n=e.match(ae);return n!=null&&n.groups?n.groups.doubleQuoted??n.groups.singleQuoted??n.groups.dotNotation:void 0}const ae=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-zA-Z_][a-zA-Z0-9_]*))$/i;function Ze(e){var n,t;return((t=(n=e.match(oe))==null?void 0:n[1])==null?void 0:t.replace(/\\'/g,"'"))??null}const oe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let I;function se(){return I||(I=(async()=>{const[e,n,t]=await Promise.all([c(()=>import("./arcadeUtils-0u35Qy5N.js"),__vite__mapDeps([9,10,5,11,7,4,6,8,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,3,28,29])),c(()=>import("./batchExec-Cjw9LNGD.js"),__vite__mapDeps([30,4,5,31,32,33,34])),c(()=>import("./aiServices-C9Z_66ql.js").then(i=>i.ag),__vite__mapDeps([11,7,4,5,6,8,12,13,14,15,16,17,18,19]))]);return{arcade:e.arcade,arcadeUtils:e,batchExec:n,aiServices:t,Dictionary:e.Dictionary,Feature:e.arcadeFeature,Voxel:e.Voxel}})()),I}const ue=/^([0-9_])/,fe=/[^a-z0-9_\u0080-\uffff]+/gi;function Ke(e){return e==null?null:e.trim().replaceAll(fe,"_").replace(ue,"F$1")||null}const ce=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],de=["field","normalizationField"];function en(e,n){if(e!=null&&n!=null){for(const t of Array.isArray(e)?e:[e])if(A(ce,t,n),"visualVariables"in t&&t.visualVariables)for(const i of t.visualVariables)A(de,i,n)}}function A(e,n,t){if(e)for(const i of e){const r=X(i,n),l=r&&typeof r!="function"&&t.get(r);l&&j(i,l.name,n)}}function nn(e,n){var t;if(e!=null&&((t=n==null?void 0:n.fields)!=null&&t.length))if("startField"in e){const i=n.get(e.startField),r=n.get(e.endField);e.startField=(i==null?void 0:i.name)??null,e.endField=(r==null?void 0:r.name)??null}else{const i=n.get(e.startTimeField),r=n.get(e.endTimeField);e.startTimeField=(i==null?void 0:i.name)??null,e.endTimeField=(r==null?void 0:r.name)??null}}const b=new Set;function T(e,n){return e&&n?(b.clear(),p(b,e,n),Array.from(b).sort()):[]}function p(e,n,t){var i;if(t)if((i=n==null?void 0:n.fields)!=null&&i.length)if(t.includes("*"))for(const{name:r}of n.fields)e.add(r);else for(const r of t)g(e,n,r);else{if(t.includes("*"))return e.clear(),void e.add("*");for(const r of t)r!=null&&e.add(r)}}function g(e,n,t){if(typeof t=="string")if(n){const i=n.get(t);i&&e.add(i.name)}else e.add(t)}function tn(e,n){return n==null||e==null?[]:n.includes("*")?(e.fields??[]).map(t=>t.name):n}function rn(e,n,t=1){if(!n||!e)return[];if(n.includes("*"))return["*"];const i=T(e,n);return i.length/e.fields.length>=t?["*"]:i}async function u(e,n,t){var l;if(!t)return;let i;const r=le(t);if(r)i=[r];else{const{arcadeUtils:a}=await se();i=a.extractFieldNames(t,(l=n==null?void 0:n.fields)==null?void 0:l.map(o=>o.name))}for(const a of i)g(e,n,a)}async function w(e,n,t){if(t&&t!=="1=1"){const i=await B(t,n);if(!i.isStandardized)throw new H("fieldUtils:collectFilterFields","Where clause is not standardized",{where:t});p(e,n,i.fieldNames)}}function ln({displayField:e,fields:n}){return e||(n!=null&&n.length?$(n,"name-or-title")||$(n,"unique-identifier")||$(n,"type-or-category")||pe(n):null)}function pe(e){for(const n of e){if(!(n!=null&&n.name))continue;const t=n.name.toLowerCase();if(t.includes("name")||t.includes("title"))return n.name}return null}function $(e,n){for(const t of e)if(t!=null&&t.valueType&&t.valueType===n)return t.name;return null}async function an(e,n){var i;if(!n)return;const t=(i=n.elevationInfo)==null?void 0:i.featureExpressionInfo;return t?t.collectRequiredFields(e,n.fieldsIndex):void 0}function me(e,n,t){t.onStatisticExpression?u(e,n,t.onStatisticExpression.expression):e.add(t.onStatisticField)}async function on(e,n,t){if(!n||!t||!("fields"in t))return;const i=[],r=t.popupTemplate;i.push(D(e,n,r)),t.fields&&i.push(...t.fields.map(async l=>me(e,n.fieldsIndex,l))),await Promise.all(i)}async function sn(e,n){var l,a,o;const{fieldsIndex:t,trackInfo:i}=n;if(!n||!i||!t)return;const r=[(l=i.latestObservations.renderer)==null?void 0:l.collectRequiredFields(e,t),(a=i.previousObservations.renderer)==null?void 0:a.collectRequiredFields(e,t),(o=i.trackLines.renderer)==null?void 0:o.collectRequiredFields(e,t)];i.popupTemplate&&r.push(D(e,n,i.popupTemplate));for(const s of[i.latestObservations.labelingInfo,i.previousObservations.labelingInfo,i.trackLines.labelingInfo])if(s)for(const k of s)r.push(R(e,t,k));await Promise.all(r)}async function D(e,n,t){const i=[];t!=null&&t.expressionInfos&&i.push(...t.expressionInfos.map(l=>u(e,n.fieldsIndex,l.expression)));const r=t==null?void 0:t.content;if(Array.isArray(r))for(const l of r)l.type==="expression"&&l.expressionInfo&&i.push(u(e,n.fieldsIndex,l.expressionInfo.expression));await Promise.all(i)}async function un(e,n,t){n&&(n.timeInfo&&(t!=null&&t.timeExtent)&&p(e,n.fieldsIndex,[n.timeInfo.startField,n.timeInfo.endField]),n.floorInfo&&p(e,n.fieldsIndex,[n.floorInfo.floorField]),(t==null?void 0:t.where)!=null&&await w(e,n.fieldsIndex,t.where))}async function fn(e,n,t){n&&t&&await Promise.all(t.map(i=>ye(e,n,i)))}async function ye(e,n,t){n&&t&&(t.valueExpression?await u(e,n.fieldsIndex,t.valueExpression):t.field&&g(e,n.fieldsIndex,t.field))}function cn(e){return e?T(e.fieldsIndex,O(e)):[]}function ge(e){if(!e)return[];const n=e.geometryFieldsInfo;return n?T(e.fieldsIndex,[n.shapeAreaField,n.shapeLengthField]):[]}async function dn(e,n,t){if(!n||!t)return;const i=n.fieldsIndex;await Promise.all(t.filters.map(r=>w(e,i,r.where)))}const Fe=new Set(["oid","global-id","guid"]),Ie=new Set(["oid","global-id"]),be=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function $e(e){const n=new Set;V(e).forEach(i=>n.add(i)),ge(e).forEach(i=>n.add(i.toLowerCase()));const t=e&&"infoFor3D"in e?e.infoFor3D:void 0;return t&&(Object.values(t.assetMapFieldRoles).forEach(i=>n.add(i.toLowerCase())),Object.values(t.transformFieldRoles).forEach(i=>n.add(i.toLowerCase()))),Array.from(n)}function O(e){if(!e)return[];const n="editFieldsInfo"in e&&e.editFieldsInfo;if(!n)return[];const{creationDateField:t,creatorField:i,editDateField:r,editorField:l}=n;return[t,i,r,l].filter(Boolean)}function V(e){return O(e).map(n=>n.toLowerCase())}function pn(e,n){var t;return e.editable&&!Fe.has(e.type)&&!V(n).includes(((t=e.name)==null?void 0:t.toLowerCase())??"")}function mn(e,n){var i;const t=((i=e.name)==null?void 0:i.toLowerCase())??"";return!((n==null?void 0:n.objectIdField)!=null&&t===n.objectIdField.toLowerCase()||(n==null?void 0:n.globalIdField)!=null&&t===n.globalIdField.toLowerCase()||$e(n).includes(t)||Ie.has(e.type)||be.some(r=>r.test(t)))}async function yn(e,n){const{labelingInfo:t,fieldsIndex:i}=n;t!=null&&t.length&&await Promise.all(t.map(r=>R(e,i,r)))}async function R(e,n,t){if(!t)return;const i=t.getLabelExpression(),r=t.where;if(i.type==="arcade")await u(e,n,i.expression);else{const l=i.expression.match(/{[^}]*}/g);l&&l.forEach(a=>{g(e,n,a.slice(1,-1))})}await w(e,n,r)}function gn(e){const n=e.defaultValue;return n!==void 0&&P(e,n)?n:e.nullable?null:void 0}function Fn(e){const n=typeof e=="string"?{type:e}:e;return Me(n)?255:n.type==="esriFieldTypeDate"||n.type==="date"?8:void 0}function U(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function _e(e){return e===null||U(e)}function Te(e){return e===null||Number.isInteger(e)}function we(){return!0}function P(e,n){let t;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":t=e.nullable?Te:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":t=e.nullable?_e:U;break;case"string":case"esriFieldTypeString":t=e.nullable?J:f;break;default:t=we}return arguments.length===1?t:t(n)}const xe=["integer","small-integer","big-integer","long"],he=["single","double"],Ee=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],Ae=["esriFieldTypeSingle","esriFieldTypeDouble"],C=new Set([...xe,...Ee]),ve=new Set([...he,...Ae]),Ne=v(C,ve);function In(e){return e!=null&&C.has(e.type)}function Se(e){return e!=null&&Ne.has(e.type)}function Me(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function bn(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function $n(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function _n(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function Tn(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function wn(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function xn(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function hn(e,n){return Le(e,n)===null}var m,y;function En(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Le(e,n){return e==null||e.nullable&&n===null?null:P(e,n)?Se(e)&&!De(e.type,Number(n))?m.OUT_OF_RANGE:null:y.INVALID_TYPE}function De(e,n){const t=typeof e=="string"?G(e):e;if(!t)return!1;const i=t.min,r=t.max;return t.isInteger?Number.isInteger(n)&&n>=i&&n<=r:n>=i&&n<=r}function G(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Oe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return Ve;case"esriFieldTypeBigInteger":case"big-integer":return Re;case"esriFieldTypeSingle":case"single":return Ue;case"esriFieldTypeDouble":case"double":return Pe}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(m||(m={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(y||(y={}));const Oe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},Ve={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},Re={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},Ue={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},Pe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function An(e,n,t){switch(e){case d.INVALID_CODED_VALUE:return`Value ${t} is not in the coded domain - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case d.VALUE_OUT_OF_RANGE:return`Value ${t} is out of the range of valid values - field: ${n.name}, domain: ${JSON.stringify(n.domain)}`;case y.INVALID_TYPE:return`Value ${t} is not a valid value for the field type - field: ${n.name}, type: ${n.type}, nullable: ${n.nullable}`;case m.OUT_OF_RANGE:{const{min:i,max:r}=G(n.type);return`Value ${t} is out of range for the number type - field: ${n.name}, type: ${n.type}, value range is ${i} to ${r}`}}}function vn(e,n){return!Ce(e,n,null)}function Ce(e,n,t){if(!(e!=null&&e.attributes)||!n)return!0;const i=new Set(Object.keys(e.attributes));let r=!1;for(const l of n)if(!i.has(l)&&(r=!0,t==null))break;return r}function Nn(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(n=>e.toLowerCase().startsWith(n))}function Sn(e){const n=e==null?void 0:e.match(/{[^}]+}/g);return n?n.map(t=>t.slice(1,-1).split(":")[0].trim()):[]}export{In as A,tn as B,cn as C,qe as D,u as E,Me as F,Ze as G,mn as H,bn as I,We as J,on as K,an as L,fn as M,sn as N,dn as O,Nn as P,yn as Q,un as R,Le as S,Tn as T,An as U,je as V,pn as W,Sn as X,rn as Y,J as Z,hn as _,se as a,$n as b,nn as c,T as d,gn as e,En as f,Se as g,xn as h,He as i,Ye as j,vn as k,f as l,Je as m,Fn as n,Qe as o,Ke as p,g as q,ze as r,en as s,Be as t,Xe as u,ln as v,_n as w,wn as x,p as y,B as z};
