const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/visualVariableUtils-D9hF7KBy.js","assets/Identifiable-BjM0PfdN.js","assets/index-CVvIVqY1.js","assets/Graphic-C2Bnzy89.js","assets/PopupTemplate-CF36_3mn.js","assets/fieldUtils-Br-fPSxS.js","assets/jsonUtils-DBuABSQZ.js","assets/typeUtils-U-Zf11cK.js","assets/createFeatureId-BiB9j2WD.js","assets/typeUtils-CP9PJ8Sp.js","assets/SimpleMarkerSymbol-D-X_CJ8B.js","assets/screenUtils-aQeO9QTD.js","assets/aaBoundingBox-BrXqvn3i.js","assets/TextSymbol-DPyc43q3.js","assets/PictureMarkerSymbol-DOPylmLK.js","assets/lengthUtils-BDJ7rNGW.js"])))=>i.map(i=>d[i]);
import{_ as A}from"./index-CVvIVqY1.js";import{b5 as w}from"./Identifiable-BjM0PfdN.js";import{a as L}from"./fieldUtils-Br-fPSxS.js";import{L as p,M as O,N as F}from"./utils-D_8doFaG.js";import"./colorUtils-Da3inJZr.js";import{q as W}from"./jsxFactory-D4gVuCa_.js";import"./enums-BuAlJCBy.js";import"./typeUtils-CP9PJ8Sp.js";import"./PictureMarkerSymbol-DOPylmLK.js";import"./SimpleMarkerSymbol-D-X_CJ8B.js";import"./TextSymbol-DPyc43q3.js";import"./defaults3D-BGxlF4_A.js";var o;(function(i){i[i.size=22]="size",i[i.lineWidth=50]="lineWidth",i[i.maxSize=120]="maxSize",i[i.maxOutlineSize=80]="maxOutlineSize",i[i.tallSymbolWidth=20]="tallSymbolWidth"})(o||(o={}));const g=w("android");w("chrome")||g&&g>=4;W();o.size;o.maxSize;o.maxOutlineSize;o.lineWidth;o.tallSymbolWidth;function z(i){return i&&"opacity"in i?i.opacity*z(i.parent):1}async function B(i,e){var S;if(!i)return;const b=i.sourceLayer,h=(e!=null&&e.useSourceLayer?b:i.layer)??b,s=e!=null&&e.ignoreOpacity?1:z(h);if(i.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){const r=i.symbol.type==="web-style"?await i.symbol.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):i.symbol.clone();return p(r,null,s),r}const a=(e==null?void 0:e.renderer)??R(h);let l=a&&"getSymbolAsync"in a?await a.getSymbolAsync(i,e):null;if(!l)return;if(l=l.type==="web-style"?await l.fetchSymbol({...e,acceptedFormats:e==null?void 0:e.webStyleAcceptedFormats,cache:e==null?void 0:e.webStyleCache}):l.clone(),!a||!("visualVariables"in a)||!((S=a.visualVariables)!=null&&S.length))return p(l,null,s),l;if("arcadeRequiredForVisualVariables"in a&&a.arcadeRequiredForVisualVariables&&(e==null?void 0:e.arcade)==null){const r={...e};r.arcade=await L(),e=r}const{getColor:V,getOpacity:x,getAllSizes:v,getRotationAngle:_}=await A(()=>import("./visualVariableUtils-D9hF7KBy.js").then(r=>r.b),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])),c=[],t=[],u=[],d=[];for(const r of a.visualVariables)switch(r.type){case"color":c.push(r);break;case"opacity":t.push(r);break;case"rotation":d.push(r);break;case"size":r.target||u.push(r)}const f=!!c.length&&c[c.length-1],m=f?V(f,i,e):null,y=!!t.length&&t[t.length-1];let n=y?x(y,i,e):null;if(s!=null&&(n=n!=null?n*s:s),e!=null&&e.ignoreOpacity&&(n=1),m!=null&&y&&n!=null&&(m.a=1),p(l,m,n),u.length&&(e==null?void 0:e.ignoreSizeVariables)!==!0){const r=v(u,i,e);await O(l,r)}if((e==null?void 0:e.ignoreRotationVariables)!==!0)for(const r of d)F(l,_(r,i,e),r.axis);return l}function R(i){if(i)return"renderer"in i?i.renderer:void 0}export{B as x};
