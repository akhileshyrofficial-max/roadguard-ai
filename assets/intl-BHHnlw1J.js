import{s as c,H as $,cV as m}from"./Identifiable-B58w9FD1.js";import{m as b,u as g}from"./number-kTr8sdcN.js";async function y(e,t,n,r){const o=t.exec(n);if(!o)throw new c("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${t}"`);const s=o[1]?`${o[1]}/`:"",l=o[2],w=b(r),i=`${s}${l}.json`,h=w?`${s}${l}_${w}.json`:i;let a;try{a=await u(e(h))}catch(f){if(h===i)throw new c("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:f});try{a=await u(e(i))}catch(p){throw new c("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:p})}}return a}async function u(e){if(d.fetchBundleAsset!=null)return d.fetchBundleAsset(e);const t=await $(e,{responseType:"text"});return JSON.parse(t.data)}class R{constructor({base:t="",pattern:n,location:r=new URL(window.location.href)}){let o;o=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=o,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,n){return y(this.getAssetUrl,this.matcher,t,n)}}function U(e){return new R(e)}const d={};g(U({pattern:"esri/",location:m}));
