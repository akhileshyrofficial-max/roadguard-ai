import{c as r,m as a,d as p,T as $,ad as f,bi as D,n as C,cZ as J,f4 as O,a3 as x,al as K,ac as E,ab as m,e6 as z,s as T,ft as H,Z,fu as U}from"./Identifiable-BjM0PfdN.js";import{a as o}from"./layerContainerType-C5CzMsLd.js";import{c as Q}from"./ElevationInfo-B2ksLwBj.js";import{u as R}from"./Layer-CUjb8Y3m.js";const B={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGISVideoLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},N={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},W={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},X={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,Object3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WCS:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WCS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":B,"web-map/basemap":N,"web-map/tables":W,"link-chart/operational-layers":{...B,LinkChartLayer:!0},"link-chart/basemap":N,"link-chart/tables":W,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0,WCS:!0},"portal-item/tables":{ArcGISFeatureLayer:!0,SubtypeGroupTable:!0}};let c=class extends ${constructor(e){super(e),this.description=null,this.label=null,this.type=null}};r([a({type:String,json:{write:!0}})],c.prototype,"description",void 0),r([a({type:String,json:{write:!0}})],c.prototype,"label",void 0),r([a()],c.prototype,"type",void 0),c=r([p("esri.tables.elements.AttributeTableElement")],c);const b=c;let S=class extends f.ClonableMixin(b){constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return super.clone()}};r([a({type:["auto"],json:{write:!0}})],S.prototype,"displayType",void 0),r([a({type:["attachment"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],S.prototype,"type",void 0),S=r([p("esri.tables.elements.AttributeTableAttachmentElement")],S);const F=S;let d=class extends f.ClonableMixin(b){constructor(e){super(e),this.description=null,this.fieldName=null,this.label=null,this.type="field"}clone(){return super.clone()}};r([a({type:String,json:{read:!1,write:!1}})],d.prototype,"description",void 0),r([a({type:String,json:{write:{enabled:!0,isRequired:!0}}})],d.prototype,"fieldName",void 0),r([a({type:String,json:{read:!1,write:!1}})],d.prototype,"label",void 0),r([a({type:["field"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],d.prototype,"type",void 0),d=r([p("esri.tables.elements.AttributeTableFieldElement")],d);const V=d;let g=class extends f.ClonableMixin(b){constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return super.clone()}};r([a({type:Number,json:{type:D,write:{enabled:!0,isRequired:!0}}})],g.prototype,"relationshipId",void 0),r([a({type:["relationship"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],g.prototype,"type",void 0),g=r([p("esri.tables.elements.AttributeTableRelationshipElement")],g);const q=g,k={base:b,key:"type",typeMap:{attachment:F,field:V,relationship:q}};function Y(n){return{typesWithGroup:{base:b,key:"type",typeMap:{attachment:F,field:V,group:n,relationship:q}},typesWithoutGroup:k}}let w=class extends f.ClonableMixin(b){constructor(e){super(e),this.elements=null,this.type="group"}clone(){return super.clone()}};r([a({types:[k],json:{name:"attributeTableElements",write:!0}})],w.prototype,"elements",void 0),r([a({type:["group"],readOnly:!0,json:{read:!1,write:{enabled:!0,isRequired:!0}}})],w.prototype,"type",void 0),w=r([p("esri.tables.elements.AttributeTableGroupElement")],w);const _=w;let L=class extends f.ClonableMixin($){constructor(e){super(e),this.field=null,this.order=null}};r([a({type:String,json:{write:!0}})],L.prototype,"field",void 0),r([a({type:["asc","desc"],json:{write:!0}})],L.prototype,"order",void 0),L=r([p("esri.tables.support.FieldOrder")],L);const ee=L;var G;const re=Y(_);let v=G=class extends ${constructor(n){super(n),this.elements=null,this.orderByFields=null}clone(){return new G({elements:C(this.elements),orderByFields:C(this.orderByFields)})}};r([a({types:[re.typesWithGroup],json:{name:"attributeTableElements",write:!0}})],v.prototype,"elements",void 0),r([a({type:[ee],json:{write:!0}})],v.prototype,"orderByFields",void 0),v=G=r([p("esri.tables.AttributeTableTemplate")],v);const te=v,be={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:o}}},me={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(n,e)=>!e.disablePopup},write:{enabled:!0,writer(n,e,u){e[u]=!n}}}},Se={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:o}}},ge={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:J}}},we={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:o}}},Le={value:null,type:Q,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:o}}};function ve(n){return{type:n,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const P={write:{enabled:!0,layerContainerTypes:o},read:!0},A={type:Number,json:{origins:{"web-document":P,"portal-item":{write:{layerContainerTypes:o}}}}},fe={...A,json:{...A.json,origins:{"web-document":{...P,write:{enabled:!0,layerContainerTypes:o,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(n,e,u)=>{var i;return u&&u.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?(i=e.layerDefinition)!=null&&i.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?O(e.layerDefinition.drawingInfo.transparency):void 0:O(e.drawingInfo.transparency)}}}},Te={type:x,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(n,e)=>{const u=x.fromJSON(n);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(u.spatialReference=K.fromJSON(e.spatialReference)),u}}}},read:!1}},Ie={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},he={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.minScale",write:{layerContainerTypes:o}}},Ge={type:Number,json:{origins:{service:{write:{enabled:!1}}},name:"layerDefinition.maxScale",write:{layerContainerTypes:o}}},ae={json:{write:{ignoreOrigin:!0,layerContainerTypes:o},origins:{"web-map":{read:!1,write:!1}}}},Ae={type:te,json:{name:"attributeTableInfo",write:!0}},$e=n=>{let e=class extends n{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(i,t,s){var l;return((l=s==null?void 0:s.portalItem)==null?void 0:l.type)==="Group Layer"?void 0:i}writeListMode(i,t,s,l){(l&&l.layerContainerType==="ground"||i&&z(this,s,{},l))&&(t[s]=i)}writeOperationalLayerType(i,t,s){i&&(t[s]=i)}writeTitle(i,t){t.title=i??"Layer"}readVisibilityTimeExtent(i){return i?R.fromArray(i):null}writeVisibilityTimeExtent(i,t,s,l){i&&l.layerContainerType!=="tables"&&(i.isEmpty?l!=null&&l.messages&&l.messages.push(new T("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[s]=i.toArray())}read(i,t){t&&(t.layer=this),H(this,i,s=>super.read(i,s),t)}write(i,t){var M,j;if(!this.persistenceEnabled&&!(t!=null&&t.ignorePersistenceEnabled))return null;if(t!=null&&t.origin){const y=`${t.origin}/${t.layerContainerType||"operational-layers"}`,I=X[y];let h=!!(I!=null&&I[this.operationalLayerType]);if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&y==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&y==="web-map/operational-layers"&&(h=!1),!h)return(M=t.messages)==null||M.push(new T("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${y}'`,{layer:this})),null}const s=super.write(i,{...t,layer:this}),l=!!t&&!!t.messages&&!!t.messages.filter(y=>y instanceof T&&y.name==="web-document-write:property-required").length;return Z(s==null?void 0:s.url)?((j=t==null?void 0:t.messages)==null||j.push(new T("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&l?null:s}beforeSave(){}};return r([a({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),r([E("id",["id"])],e.prototype,"readId",null),r([a(ae)],e.prototype,"listMode",void 0),r([m("listMode")],e.prototype,"writeListMode",null),r([a({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:o,isRequired:!0}}}}})],e.prototype,"operationalLayerType",void 0),r([m("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),r([a(A)],e.prototype,"opacity",void 0),r([a({type:Boolean,readOnly:!1})],e.prototype,"persistenceEnabled",void 0),r([a({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),r([m("title"),m(["web-scene"],"title")],e.prototype,"writeTitle",null),r([a({type:R,json:{origins:{"web-scene":{write:{layerContainerTypes:o}}}}})],e.prototype,"visibilityTimeExtent",void 0),r([E("visibilityTimeExtent")],e.prototype,"readVisibilityTimeExtent",null),r([m(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[D,U]]}})],e.prototype,"writeVisibilityTimeExtent",null),r([a({type:Boolean,json:{name:"visibility",write:{layerContainerTypes:o}}})],e.prototype,"visible",void 0),e=r([p("esri.layers.mixins.OperationalLayer")],e),e};export{Ae as I,ae as T,fe as a,$e as b,te as c,we as d,ve as e,Te as g,he as j,me as l,Le as m,Se as p,be as s,Ie as u,Ge as v,A as w,ge as y};
